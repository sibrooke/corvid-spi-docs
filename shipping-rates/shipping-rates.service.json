{ "name": "shipping-rates",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "shipping-rates-spi-index.js" },
  "docs":
    { "summary": "The Shipping Rates SPI.",
      "description":
        [ "Intro___",
          "",
          " Learn more about the [Shipping Rates custom integration](https://support.wix.com/en/article/velo-shipping-rates-spi)." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "getShippingRates",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "items",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "shipping-rates.Item" ] },
              "doc": "All items to be shipped.",
              "optional": true },
            { "name": "options",
              "type": "shipping-rates.Options",
              "doc": "Shipping origin, shipping destination, and general configurations.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "shipping-rates.ShippingRates" ] },
            "doc": "Fulfilled - Available shipping rates." },
        "locations":
          [ { "lineno": 1,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "summary": "Retrieves relevant shipping rates provided by integrated shipping providers.",
            "description":
              [ "This endpoint is called by Wix Stores to retrieve the shipping rates provided by your integration.",
                "",
                "> **Note:** The `items` and `options` params are provided by the cart. However, you may add to them if, for example, you want to integrate with a shipping provider that requires information not already provided." ],
            "links": [],
            "examples":
              [ { "title": "Minimum returned fields for `shippingRates` array",
                  "body":
                    [ "export const getShippingRates = (items, options) => {",
                      "",
                      "  return {",
                      "    \"shippingRates\": [{",
                      "      \"code\": \"usps-international\",",
                      "      \"title\": \"USPS - International\",",
                      "      \"logistics\": {",
                      "        \"deliveryTime\": \"2-5 days\"",
                      "      },",
                      "      \"cost\": {",
                      "        \"price\": \"15\",",
                      "        \"currency\": \"USD\",",
                      "        \"additionalCharges\": [{",
                      "          \"price\": \"10\",",
                      "          \"type\": \"HANDLING_FEE\",",
                      "          \"details\": \"Handling fee of $5 applied for fragile items.\"",
                      "        }]",
                      "      }",
                      "    }]",
                      "  };",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Return shipping rates based on quantity of items in cart",
                  "body":
                    [ "export const getShippingRates = (items, options) => {",
                      "  return getShippingRatesByQuantity(items, options.currency)",
                      "}",
                      "",
                      "// Tally the quantity of all items",
                      "function calculateTotalCartQuantity(items) {",
                      "  return items.reduce((acc, item) => acc += item.quantity, 0);",
                      "}",
                      "",
                      "// Return shipping rates based on the calculated items' quantity",
                      "function getShippingRatesByQuantity(items, currency) {",
                      "  const cartQuantity = calculateTotalCartQuantity(items);",
                      "",
                      "  if (cartQuantity >= 3) {",
                      "    return {",
                      "      shippingRates: [{",
                      "        code: 'quantity_more_3',",
                      "        title: 'Quantity > 3',",
                      "        logistics: {",
                      "          deliveryTime: '3-5 Days'",
                      "        },",
                      "        cost: {",
                      "          price: '10.00',",
                      "          // Currency value is taken from provided options object",
                      "          currency: currency",
                      "        }",
                      "      }]",
                      "    };",
                      "  };",
                      "",
                      "  // If cartQuantity is less than 3, the following shipping rate is returned",
                      "  return {",
                      "    shippingRates: [{",
                      "      code: 'quantity_more_1',",
                      "      title: '1 Item',",
                      "      logistics: {",
                      "        deliveryTime: '3-5 Days'",
                      "      },",
                      "      cost: {",
                      "        price: '20.00',",
                      "        // Currency value is taken from provided options object",
                      "        currency: currency",
                      "      }",
                      "    }]",
                      "  };",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Example of `spi-integration-config.js` file",
                  "body":
                    [ "export function getConfig() {",
                      "  return {",
                      "    \"name\": \"East-Coast Shipping Provider\",",
                      "  };",
                      "};" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "AdditionalCharges",
        "locations":
          [ { "lineno": 123,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "type",
              "type": "string",
              "doc": "Additional charge type.\nSupported value/s:\n - `\"HANDLING_FEE\"`" },
            { "name": "details",
              "type": "string",
              "doc": "Details of the additional charge. For example, `'Handling fee of $5 applied for gift wrapping.'`" },
            { "name": "price",
              "type": "string",
              "doc": "Cost of additional charge." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "AddressDetails",
        "locations":
          [ { "lineno": 58,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "addressLine",
              "type": "string",
              "doc": "Main address line, usually street and number, as free text.",
              "optional": true },
            { "name": "streetAddress",
              "type": "shipping-rates.StreetAddressInfo",
              "doc": "Street address object, with number and name in separate fields.",
              "optional": true },
            { "name": "addressLine2",
              "type": "string",
              "doc": "Free text providing more detailed address information, such as apartment, suite, or floor." },
            { "name": "city",
              "type": "string",
              "doc": "City name." },
            { "name": "subdivision",
              "type": "string",
              "doc": "Code for a subdivision (such as state, prefecture, or province) in an [ISO 3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) format." },
            { "name": "country",
              "type": "string",
              "doc": "2-letter country code in an [ISO-3166 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) format." },
            { "name": "postalCode",
              "type": "string",
              "doc": "Postal or zip code." } ],
        "extra":
          { "oneOfGroups":
              [ { "name": "street",
                  "members":
                    [ "addressLine",
                      "streetAddress" ] } ] },
        "labels": [] },
      { "name": "BuyerDetails",
        "locations":
          [ { "lineno": 76,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "firstName",
              "type": "string",
              "doc": "Buyer's first name." },
            { "name": "lastName",
              "type": "string",
              "doc": "Buyer's last name." },
            { "name": "phone",
              "type": "string",
              "doc": "Buyer's phone number." },
            { "name": "company",
              "type": "string",
              "doc": "Company name (when relevant).",
              "optional": true },
            { "name": "vatId",
              "type": "shipping-rates.VatId",
              "doc": "Tax information (for Brazil only). If `vatId.id` is provided, `vatId.type` must also be set.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "CatalogReference",
        "locations":
          [ { "lineno": 44,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "catalogItemId",
              "type": "string",
              "doc": "ID of the item within its Wix or 3rd-party catalog. For example, `productId` for Wix Stores or `eventId` for Wix Events." },
            { "name": "appId",
              "type": "string",
              "doc": "ID of the catalog app. For example, the Wix Stores `appId`, or the 3rd-party `appId`." },
            { "name": "options",
              "type": "Object",
              "doc": "Additional info in key:value form. For example, `{\"options\":{\"Size\": \"M\", \"Color\": \"Red\"}}` or `{\"variantId\": \"<VARIANT_ID>\"}`." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Cost",
        "locations":
          [ { "lineno": 114,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "price",
              "type": "string",
              "doc": "Amount charged for this shipping rate." },
            { "name": "currency",
              "type": "string",
              "doc": "Currency code of the shipping rate price. This can differ between carriers. For example, `\"USD\"` or `\"EUR\"`.\nThis must match the value of the `currency` property received in the `options` object. Shipping rates with other currencies are not displayed on the site.\nFor example, a U.S. carrier might provide prices in USD, but a U.K. based carrier would use GBP." },
            { "name": "additionalCharges",
              "type": "shipping-rates.AdditionalCharges",
              "doc": "Additional costs such as handling fee for packaging of fragile items." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Item",
        "locations":
          [ { "lineno": 20,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "name",
              "type": "string",
              "doc": "Item name." },
            { "name": "quantity",
              "type": "number",
              "doc": "Item quantity." },
            { "name": "catalogReference",
              "type": "shipping-rates.CatalogReference",
              "doc": "References to the item's origin catalog." },
            { "name": "physicalProperties",
              "type": "shipping-rates.PhysicalProperties",
              "doc": "Physical properties of the item. When relevant, contains information such as SKU, item weight, and shippability." },
            { "name": "price",
              "type": "string",
              "doc": "Price of a single item." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Logistics",
        "locations":
          [ { "lineno": 109,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "deliveryTime",
              "type": "string",
              "doc": "Expected delivery time in free text. For example, `'3-5 business days'`." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Options",
        "locations":
          [ { "lineno": 29,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "shippingDestination",
              "type": "shipping-rates.AddressDetails",
              "doc": "Address the items are shipped to." },
            { "name": "shippingOrigin",
              "type": "shipping-rates.AddressDetails",
              "doc": "Address the items are sent from." },
            { "name": "buyerDetails",
              "type": "shipping-rates.BuyerDetails",
              "doc": "Buyer's contact details." },
            { "name": "weightUnit",
              "type": "string",
              "doc": "Weight measurement unit. Supported values: `\"KG\"` (kilograms) or `\"LB\"` (pounds)." },
            { "name": "taxIncludedInPrices",
              "type": "boolean",
              "doc": "Whether tax is included in the items' prices." },
            { "name": "currency",
              "type": "string",
              "doc": "Currency code the shipping rates will be presented in. For example, `\"USD\"` or `\"EUR\"`." },
            { "name": "instanceId",
              "type": "string",
              "doc": "Instance ID of the app that is providing the shipping rates." },
            { "name": "shippingRateDecimalPlaces",
              "type": "number",
              "doc": "Expected decimal places for the shipping rate.\nFor example, if this field is `2`, the shipping rate could be: $10, $10.1, $10.12 (up to 2 decimal places); it **cannot** be: $10.123 (or further).\n\nIf the value of `shippingRateDecimalPlaces` is less than a shipping rate's actual cost, that shipping rate will not be returned." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PhysicalProperties",
        "locations":
          [ { "lineno": 51,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "weight",
              "type": "number",
              "doc": "Item weight. Measurement unit (KG or LB) is taken from `weightUnit` field." },
            { "name": "sku",
              "type": "string",
              "doc": "Stock keeping unit. Learn more about [SKUs](https://www.wix.com/encyclopedia/definition/stock-keeping-unit-sku)." },
            { "name": "shippable",
              "type": "boolean",
              "doc": "Whether this item is shippable." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PickupDetails",
        "locations":
          [ { "lineno": 132,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "address",
              "type": "shipping-rates.AddressDetails",
              "doc": "Pickup address." },
            { "name": "pickupMethod",
              "type": "string",
              "doc": "Pickup method.\nSupported values:\n - `\"STORE_PICKUP\"`\n - `\"PICKUP_POINT\"`" } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ShippingRate",
        "locations":
          [ { "lineno": 101,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "code",
              "type": "string",
              "doc": "Unique code (or ID) of selected shipping option. For example, `\"usps_std_overnight\"`." },
            { "name": "title",
              "type": "number",
              "doc": "Shipping option title. For example, `'USPS Standard Overnight Delivery'`, `'Standard'`, or `'First-Class Package International'`." },
            { "name": "logistics",
              "type": "shipping-rates.Logistics",
              "doc": "Shipping logistics." },
            { "name": "cost",
              "type": "shipping-rates.Cost",
              "doc": "Shipping cost." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ShippingRates",
        "locations":
          [ { "lineno": 96,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "shippingRates",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "shipping-rates.ShippingRate" ] },
              "doc": "Available shipping rates. These define the shipping rate options that are displayed to site visitors on the Cart and Checkout pages." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "StreetAddressInfo",
        "locations":
          [ { "lineno": 70,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "number",
              "type": "string",
              "doc": "Street number." },
            { "name": "name",
              "type": "string",
              "doc": "Street name." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "VatId",
        "locations":
          [ { "lineno": 85,
              "filename": "shipping-rates-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Buyer's tax ID." },
            { "name": "type",
              "type": "string",
              "doc": "VAT type.\nSupported values:\n - `\"CPF\"`\n - `\"CNPJ\"`" } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }